<!DOCTYPE html>
<html>
<head>
  <title>Debug Console</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #000; color: #0f0; }
    button { padding: 10px; margin: 5px; font-size: 16px; }
    #output { white-space: pre-wrap; margin-top: 20px; }
  </style>
</head>
<body>
  <h2>Quick Debug Test</h2>
  <button onclick="testWS()">Test WebSocket (Real API)</button>
  <button onclick="testDemo()">Test Demo Mode Logic</button>
  <div id="output"></div>

  <script>
    const output = document.getElementById('output');
    function log(msg) {
      output.textContent += msg + '\n';
      console.log(msg);
    }

    function testWS() {
      output.textContent = '';
      log('Testing WebSocket connection...');
      
      const ws = new WebSocket(`ws://${window.location.host}`);
      
      ws.onopen = () => {
        log('âœ… WebSocket CONNECTED');
        log('Sending start message with empty slug...');
        ws.send(JSON.stringify({
          action: 'start',
          slug: '',
          interval: 5000
        }));
      };
      
      ws.onmessage = (e) => {
        log('ðŸ“¨ Received: ' + e.data);
      };
      
      ws.onerror = (e) => {
        log('âŒ WebSocket ERROR: ' + e);
      };
      
      ws.onclose = () => {
        log('WebSocket closed');
      };
      
      setTimeout(() => ws.close(), 10000);
    }

    function testDemo() {
      output.textContent = '';
      log('Testing demo mode data generation...');
      
      for (let i = 0; i < 5; i++) {
        const basePrice = 450 + Math.random() * 50;
        const variation = (Math.random() - 0.5) * 20;
        log(`Point ${i+1}: â‚¹${(basePrice + variation).toFixed(2)}`);
      }
      
      log('\nâœ… Demo mode logic works!');
    }
  </script>
</body>
</html>



